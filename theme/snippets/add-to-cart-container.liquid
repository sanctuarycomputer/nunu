<!-- Assign label and disabled state to add to cart button -->
{% capture button_label %}{{"snippets.product_info_bar.add_to_cart_btn.text" | t }}{% endcapture %}
{% assign button_disabled = false %}
{% if product.available %}
  {% if product_in_cart %}
    {% capture button_label %}{{"snippets.product_info_bar.added_to_cart_btn.text" | t }}{% endcapture %}
    {% assign button_disabled = true %}
  {% endif %}
{% else %}
  {% case product_type %}
    {% when "Course" %}
    {% when "Event" %}
      {% capture button_label %}{{"snippets.product_info_bar.registration_closed_btn.text" | t }}{% endcapture %}
      {% assign button_disabled = true %}
    {% else %}
      {% capture button_label %}{{"snippets.product_info_bar.sold_out_btn.text" | t }}{% endcapture %}
      {% assign button_disabled = true %}
  {% endcase %}
{% endif %}

<div class="AddToCartContainer radius-xs bg-color-black py_75">
  <form data-add-to-cart-form data-product-type={{product_type}} action="/cart/add" method="post" enctype="multipart/form-data" id="AddToCartForm" class="w100">
    <select class="{% if product.variants.size <= 1 %} none {% endif %}" name="variant" data-variant-selector>
      {% for variant in product.variants %}
        <option value="{{ variant.id }}">
          {{ variant.title }}
        </option>
      {% endfor %}
    </select>
    <button data-variant-id={{product.first_available_variant.id}} data-add-to-cart-button {% if button_disabled %} disabled {% endif %} class="w100 bg-color-transparent color-white uppercase sans-light-sm" type="submit" name="add" id="AddToCart">
      {{button_label}}
    </button>
  </form>
</div>
